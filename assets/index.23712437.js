var _=Object.defineProperty,j=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var B=(t,e,c)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[e]=c,x=(t,e)=>{for(var c in e||(e={}))k.call(e,c)&&B(t,c,e[c]);if(A)for(var c of A(e))U.call(e,c)&&B(t,c,e[c]);return t},E=(t,e)=>j(t,L(e));import{j as o,c as M,a as T,b as z,p as V,T as $,f as X,u as v,d as g,F as q,g as C,r as F,s as K,P as G,e as H}from"./vendor.b6612786.js";const J=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&p(d)}).observe(document,{childList:!0,subtree:!0});function c(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(n){if(n.ep)return;n.ep=!0;const s=c(n);fetch(n.href,s)}};J();const Q=t=>{const{text:e}=t;return o("button",{className:"px-4 py-2 border",onClick:()=>{alert(e!=null?e:"\u6309\u94AE")},children:e!=null?e:"\u6309\u94AE"})};var O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:Q});const P={title:"\u6309\u94AE",type:"object",properties:{text:{title:"\u6309\u94AE\u6587\u5B57",type:"string"}}};var W={Button:P},w=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:P,default:W});const y={setup(){$();const t={redos:[],undos:[]},e={"mutation/commit"(c,p){const{patches:n,options:s}=p,d={options:s,redos:[],undos:[]};let l=R();for(const u of n)l=X(l,u,(r,a)=>{d.redos.push(...r),d.undos.push(...a)});c({type:"mutation/commit",payload:l}),t.undos.push(d)},"mutation/redo"(c){const p=t.redos.pop();!p||(c({type:"mutation/patch",payload:p.redos}),t.undos.push(p))},"mutation/undo"(c){const p=t.undos.pop();!p||(c({type:"mutation/patch",payload:p.undos}),t.redos.push(p))}};return()=>c=>p=>{const n=Reflect.get(e,p.type);if(n)return n(c,p.payload);c(p)}},commit(t,e){N({type:"mutation/commit",payload:{patches:t,options:e}})},redo(){N({type:"mutation/redo"})},undo(){N({type:"mutation/undo"})}},D=M((t={},e)=>e.type==="mutation/commit"?Reflect.get(e,"payload"):e.type==="mutation/patch"?V(t,Reflect.get(e,"payload")):t,{nodes:{},pages:{},session:{}},(Reflect.get(window,"__REDUX_DEVTOOLS_EXTENSION_COMPOSE__")||T)(z(y.setup()))),{dispatch:N,getState:R,subscribe:ce}=D,I=()=>{if(crypto.randomUUID)return crypto.randomUUID();const t=URL.createObjectURL(new Blob);return URL.revokeObjectURL(t),t.slice(-36)},Y=()=>{let t;{const n=Object.entries(w).map(([s,d])=>{const l=()=>{const{session:r,pages:a}=R(),i=r.pageId?a[r.pageId]:void 0;if(!i)return alert("\u8BF7\u5148\u6DFB\u52A0\u9875\u9762");const m=I();y.commit([({nodes:f})=>{f[m]={id:m,content:[],element:{type:s,props:{}}}},({pages:f})=>{f[i.id].content.push(m)}])},{title:u}=d;return o("div",{onClick:l,children:u},s)});t=g("div",{className:"w-60 bg-zinc-100",children:[o("h2",{children:"\u7269\u6599\u533A"}),o("div",{children:"\u70B9\u51FB\u6DFB\u52A0\u5230\u5F53\u524D\u9875\u9762"}),n]})}let e;{let n;n=o("button",{onClick:()=>{const u=I();y.commit([({pages:r})=>{r[u]={id:u,content:[]}},({session:r})=>{r.pageId=u}])},children:"\u6DFB\u52A0\u9875\u9762"});let s;{let l;l=v(({pages:i})=>Object.keys(i)).map(i=>o("option",{value:i,children:i.slice(-12)},i));const u=a=>{const{value:i}=a.target;y.commit([({session:m})=>{m.pageId=i}])},r=v(({session:a})=>a.pageId);s=o("select",{value:r,onChange:u,children:l})}let d;{const l=r=>{const{nodeId:a}=r,i=h=>{h.stopPropagation(),y.commit([({session:b})=>{b.nodeId=a}])},m=v(({nodes:h})=>h[a]);if(!m)return o(q,{children:"\u672A\u627E\u5230\u8282\u70B9\u6570\u636E"});const f=Reflect.get(O,m.element.type);return o("span",{onClickCapture:i,children:o(f,E(x({},m.element.props),{children:m.content.map(h=>o(l,{nodeId:h},h))}))})},u=v(({session:r,pages:a})=>r.pageId?a[r.pageId]:void 0);d=u==null?void 0:u.content.map(r=>o(l,{nodeId:r},r))}e=g("div",{children:[o("h2",{children:"\u7F16\u8F91\u533A"}),g("div",{className:"inline-grid grid-flow-col gap-2",children:[o("button",{onClick:y.undo,children:"\u64A4\u9500"}),o("button",{onClick:y.redo,children:"\u91CD\u505A"}),n,s]}),o("div",{className:"w-[375px] h-[812px] border box-content",children:d})]})}let c;{const n=v(({session:l,nodes:u})=>l.nodeId?u[l.nodeId]:void 0),s=n?"\u5F53\u524D\u9009\u4E2D\u8282\u70B9: "+n.id.slice(-12):"\u9009\u62E9\u8282\u70B9\u5E76\u8FDB\u884C\u914D\u7F6E";let d;{const l=(u,r)=>{var m;if(!n)return;const a=C(n,u),i=C(w,[n.element.type,...r]);if(i.type==="string"){const f=(m=i.placeholder)!=null?m:`\u8BF7\u586B\u5199${i.title}`,h=b=>{y.commit([({nodes:S})=>{K(S,[n.id,...u],b.target.value)}])};return g("div",{children:[o("div",{children:i.title}),o("input",{placeholder:f,defaultValue:a,onChange:h})]},n.id)}if(i.type==="object")return Object.keys(i.properties).map(f=>l([...u,f],[...r,"properties",f]))};d=l(["element","props"],[])}c=g("div",{className:"flex-1",children:[o("h2",{children:"\u914D\u7F6E\u533A"}),o("div",{children:s}),d]})}let p;{const n=v(({session:d,nodes:l,pages:u})=>{const{pageId:r}=d;if(!r)return;const a=i=>{const m=i===r?u[r]:l[i];if(!m)return;const{content:f,element:h}=m;return{type:"object",properties:Object.fromEntries(f.map(b=>[b,a(b)])),"x-component":h==null?void 0:h.type,"x-component-props":h==null?void 0:h.props}};return a(r)});let s;{const d=l=>{var m;if(!l)return;const{"x-component":u,"x-component-props":r,properties:a}=l,i=(m=Reflect.get(O,u))!=null?m:f=>o("div",{children:f.children});return o(i,E(x({},r),{children:Object.entries(a).map(([f,h])=>o(F.exports.Fragment,{children:d(h)},f))}))};s=d(n)}p=g("div",{className:"flex-1 bg-zinc-400",children:[o("h2",{children:"\u9884\u89C8\u533A"}),o("div",{children:"\u67E5\u770B\u771F\u673A\u6E32\u67D3\u6548\u679C"}),o("div",{className:"w-[375px] h-[812px] border box-content bg-white mx-auto",children:s})]})}return g("div",{className:"h-full flex flex-row",children:[t,g("div",{className:"w-[720px] flex flex-row",children:[e,c]}),p]})},Z=t=>{const{children:e}=t;return o(F.exports.StrictMode,{children:o(G,{store:D,children:e})})},ee=t=>{const{children:e}=t,{APP_NAME:c}={APP_NAME:"\u53EF\u89C6\u5316\u642D\u5EFA",BASE_URL:"/layon/",MODE:"production",DEV:!1,PROD:!0};return g("div",{className:"h-screen flex flex-col",children:[o("main",{className:"flex-1",children:e}),g("footer",{className:"h-12 bg-zinc-700 text-white flex flex-row items-center",children:[o("div",{className:"flex-1 ml-4",children:c}),o("div",{className:"mr-4",children:"\u66F4\u65B0\u65F6\u95F4: 2022-02-07"})]})]})},te=()=>o(Y,{}),ne=t=>{const e=typeof t=="string"?document.getElementById(t):t;!e||H.exports.render(o(Z,{children:o(ee,{children:o(te,{})})}),e)};ne("root");
